# Home Assistant

- [1](http://ratonland.org/tag/yaml/)

# Modules

- [Conversation](https://home-assistant.io/components/conversation/)
- [Cast](https://home-assistant.io/components/media_player.cast/)
- [Alexa](https://home-assistant.io/components/alexa/)
- [Device Tracker](https://home-assistant.io/components/device_tracker/)
- [Script](https://home-assistant.io/components/script/)
- [Scene](https://home-assistant.io/components/scene/)

# Installation

```sh
hochob@server:~$ sudo apt-get install python3-setuptools
hochob@server:~$ sudo apt-get install python3-pip
```

```sh
hochob@server:~$ sudo pip3 install --upgrade pip
```

```sh
hochob@server:~$ sudo pip3 install homeassistant
```

# Execution

```sh
hochob@server:~$ hass --open-ui
Unable to find configuration. Creating default one in /home/hochob/.homeassistant
Config directory: /home/hochob/.homeassistant
INFO:homeassistant.core:Bus:Handling <Event service_registered[L]: service=turn_off, domain=homeassistant>
...

    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

        Hello, and welcome to Home Assistant!

        We'll hope that we can make all your dreams come true.

        Here are some resources to get started:

         - Configuring Home Assistant:
           https://home-assistant.io/getting-started/configuration/

         - Available components:
           https://home-assistant.io/components/

         - Troubleshooting your configuration:
           https://home-assistant.io/getting-started/troubleshooting-configuration/

         - Getting help:
           https://home-assistant.io/help/

        This message is generated by the introduction component. You can
        disable it in configuration.yaml.

    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
...

```

## Check Config

```sh
user@server:~$ hass --script check_config
Testing configuration at /root/.homeassistant
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up sun
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up group
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up switch
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up conversation
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up updater
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up http
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up notify
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up automation
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up recorder
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up websocket_api
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up api
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up media_player
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up tts
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up config
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up history
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up frontend
17-03-19 08:03:19 INFO (MainThread) [homeassistant.setup] Setting up logbook
user@server:~$
```

# .homeassistant/configuration.yaml

```sh
homeassistant:
  # Name of the location where Home Assistant is running
  name: Home
  # Location required to calculate the time the sun rises and sets
  latitude: 20.6208618
  longitude: -103.4254426
  # Impacts weather/sunrise data (altitude above sea level in meters)
  elevation: 1579
  # metric for Metric, imperial for Imperial
  unit_system: metric
  # Pick yours from here: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: America/Mexico_City
  customize:
   switch.main:
    friendly_name: Lupe Robot Station
    icon: mdi:video
   switch.help:
    friendly_name: Help
    icon: mdi:block-helper
   script.help:
    friendly_name: Help
    icon: mdi:block-helper
   media_player.main:
    hidden: yes
   automation.lupe_robot_station_telegram:
    hidden: yes
   automation.lupe_robot_station_text_to_speech:
    hidden: yes
   automation.help_telegram:
    hidden: yes

# Show links to resources in log and frontend
#introduction:

# Enables the frontend
frontend:

# Enables configuration UI
config:

http:
  # Uncomment this to add a password (recommended!)
  # api_password: PASSWORD
  # Uncomment this if you are using SSL or running in Docker etc
  # base_url: example.duckdns.org:8123

# Checks for available updates
updater:

# Discover some devices automatically
#discovery:

# Allows you to issue voice commands from the frontend in enabled browsers
conversation:


# Enables support for tracking state changes over time.
history:

# View all events in a logbook
logbook:

# Track the sun
sun:

# Weather Prediction

# Text to speech
tts:
  platform: google
  #cache: true
  #cache_dir: /tmp/tts
  #time_memory: 300

#group: !include groups.yaml

#media_player:
#  - platform: plex
#  - platform: cast

#sensor:
#  - platform: plex
#  - platform: yr

switch:
  platform: command_line
  switches:
    main:
      command_on: "cvlc --no-video-title-show --fullscreen /home/hochob/Videos/BigBuckBunny.mp4 vlc://quit &"
      command_off: "sudo pkill vlc"
    help:
      command_on: "echo"
      command_off: "echo"


script:
  help:
    alias: Help Needed
    sequence:
      - alias: Hocho Bot Notification
        service: notify.hochobbot
        data:
          message: "Visitor Center needs help!"

media_player:
  - platform: vlc
    name: main
#  - platform: kodi
#    host: 127.0.0.1
#    user: kodi
#    password: kodi

notify:
  - name: hochobbot
    platform: telegram
    api_key: 301796470:AAHTZ7pYgjqVwOAzBDIIHfGziMvCrIFc_co
    chat_id: 166426424

automation:
  - alias: Lupe Robot Station Telegram
    trigger:
      platform: state
      entity_id: switch.main
      state: 'on'
    action:
      service: notify.hochobbot
      data:
        message: "Lupe Robot Station has been activated"
  - alias: Lupe Robot Station Text To Speech
    trigger:
      platform: state
      entity_id: switch.main
      state: 'on'
    action:
      service: tts.google_say
      data:
        message: "Lupe Robot Station has been activated"
  - alias: Help Telegram
    trigger:
      platform: state
      entity_id: switch.help
      state: 'on'
    action:
      service: notify.hochobbot
      data:
        message: "Visitor Center needs help!"

group:
 entrance:
  name: Entrance
  entities:
   - switch.main
 demos:
  name: Help
   - switch.help
```